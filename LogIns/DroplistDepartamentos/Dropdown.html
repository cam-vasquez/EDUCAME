<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Departamentos</title>
    <link rel="icon" href="/RESOURCES/TabLogo1.png">
    
    <link rel="stylesheet" href="/DroplistDepartamentos/styleDropDown.css">
    <script src="depart-muncipio.js"></script>

    <!-- LOCAL BOOTSTRAP  -->
    <link rel="stylesheet" href="/RESOURCES/bootstrap-5.0.2-dist/css/bootstrap.css">
    <link rel="stylesheet" href="/RESOURCES/bootstrap-5.0.2-dist/css/bootstrap.rtl.css">
    <link rel="stylesheet" href="/RESOURCES/bootstrap-5.0.2-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/RESOURCES/bootstrap-5.0.2-dist/css/bootstrap.rtl.min.css">

    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
 --> 
    <!-- LOCAL FONTAWESOME -->
    <link rel="stylesheet" href="/RESOURCES/fontawesome-free-6.1.1-web/css/all.css">
        
</head>
<body>

<section>

<div class="contentBox">
    <div class="formBox">
        <img src="/RESOURCES/image.png" alt="gob sv" class="logo"><br>
        <h2>Seleccionar departamento</h2><br>

<form action="#" method="post" target="_blank">

    <div class="inputBox">
        <div class="col-md-24 left">
            <label>Departamento</label>
        </div>
        <div class="container">
        <div class="row">
            <div class="col">
                <select aria-label="Departamento" id="departamento" name="departamento">
                    <option value='action'>Selecionar departmento<!-- <i class="fa-angle-down"></i> --><i class="bi bi-chevron-down"></i></option>
                </select>   
            </div>    
        </div>
        </div>
    </div>

    <br>

<div class="inputBox">
    <div class="col-md-24 left">
        <label>Municipio</label>
    </div>
    <div class="container">
    <div class="row">
        <div class="col">
            <div>
                <span id="municipio-code"><input type="text" id="municipio"></span>
                </div>  
        </div>    
    </div>
    </div>
</div>

<br>
<!--  -->

<div class="container">
<div class="row"> 
    <div class="col">
        <div class="inputBox">
            <input type="reset" value="Limpiar" id="btnLimpiar" > 
        </div>
    </div>
    <div class="col">
        <div class="inputBox">
            <input type="button" onClick="javascript:window.open('http://www.google.com', '_self');" value="Aceptar" id="btnLogIn"  >
        </div>
    </div>            
</div>
</div>                       
                    
</form>         
</div>     
</div>
</section>


<!-- Js   -->   

<script>
    // user departamento code for selected option
    let user_departamento_code = "IN";
    
    (function () {
    
        // Get the departamento name and municipio name from the imported script.
        let departamento_list = departamento_and_municipios['departamento'];
        let municipios_list = departamento_and_municipios['municipios'];
    
        // creating departamento name drop-down
        let option =  '';
        option += '<option>Seleccionar departamento</option>';
        for(let departamento_code in departamento_list){
            // set selected option user departamento
            let selected = (departamento_code == user_departamento_code) ? ' selected' : '';
            option += '<option value="'+departamento_code+'"'+selected+'>'+departamento_list[departamento_code]+'</option>';
        }
        document.getElementById('departamento').innerHTML = option;
    
        // creating municipios name drop-down
        let text_box = '<input type="text" class="input-text" id="municipio">';
        let municipio_code_id = document.getElementById("municipio-code");
    
        function create_municipios_dropdown() {
            // get selected departamento code
            let departamento_code = document.getElementById("departamento").value;
            let municipios = municipios_list[departamento_code];
            // invalid departamento code or no municipios add textbox
            if(!municipios){
                municipio_code_id.innerHTML = text_box;
                return;
            }
            let option = '';
            if (municipios.length > 0) {
                option = '<select id="municipio">\n';
                for (let i = 0; i < municipios.length; i++) {
                    option += '<option value="'+municipios[i].code+'">'+municipios[i].name+'</option>';
                }
                option += '</select>';
            } else {
                // create input textbox if no municipios 
                option = text_box
            }
            municipio_code_id.innerHTML = option;
        }
    
        // departamento select change event
        const departamento_select = document.getElementById("departamento");
        departamento_select.addEventListener('change', create_municipios_dropdown);
    
        create_municipios_dropdown();
    })();
    
</script>

<script src="depart-muncipio.js"></script>

    <!-- Js libraries and so -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-kjU+l4N0Yf4ZOJErLsIcvOU2qSb74wXpOhqTvwVx3OElZRweTnQ6d31fXEoRD1Jy" crossorigin="anonymous"></script>

</body>
